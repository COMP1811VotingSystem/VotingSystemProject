import mysql.connector

# Connecting to database. NOTE code line 8 must be called before database can be entered in the below command
# Add password to below executing!


db = mysql.connector.connect(user='York', password='', host='localhost',database="GSUVotingSystemDatabase")
mycursor = db.cursor(buffered=True)

mycursor.execute("CREATE DATABASE GSUVotingSystemDatabase")


# Creating All Tables

mycursor.execute("CREATE TABLE Student (Forename VARCHAR(50) NOT NULL, Surname VARCHAR(50) NOT NULL,"
                 "Username VARCHAR(7) NOT NULL PRIMARY KEY, Password VARCHAR(50) NOT NULL,"
                 "Gender ENUM('M','F','O') NOT NULL)")
                 
mycursor.execute("CREATE TABLE Candidate (Forename VARCHAR(50) NOT NULL, Surname VARCHAR(50) NOT NULL,
                 "Position VARCHAR(50) NOT NULL, Username VARCHAR(7) NOT NULL PRIMARY KEY,
                 "Faculty ENUM('AS','SB','EH','ES') NOT NULL, Gender ENUM('M','F','O') NOT NULL)")
                 
mycursor.execute("CREATE TABLE Votes (VotesID int PRIMARY KEY NOT NULL AUTO_INCREMENT,Username VARCHAR(7),
                 "FOREIGN KEY(Username) REFERENCES Student(Username), Position VARCHAR(50),
                 "FirstPreference VARCHAR(50), SecondPreference VARCHAR(50), ThirdPreference VARCHAR(50),
                 "FourthPreference VARCHAR(50))")
                 
mycursor.execute("CREATE TABLE Result (Username VARCHAR(7) NOT NULL, FOREIGN KEY(Username) REFERENCES Candidate(Username),
                 "FirstPreference int DEFAULT 0, SecondPreference int DEFAULT 0, ThirdPreference int DEFAULT 0, 
                 "FourthPreference int DEFAULT 0)")
                 

                 
                 
# Adding 5 students to MySQL Database


mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Dante", "Christian", "dc3045g", "ChristDante",
                                                     "M", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Milly", "Rose", "mr2945g", "HelloWorld",
                                                     "F", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Chloe", "Miles", "cm4935g", "99Chloe99",
                                                     "F", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Ronny", "Diaz", "rd2034g", "RDRDPass",
                                                     "M", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Tre", "Hawes", "th2034g", "TreHawes1999",
                                                     "M", "EH"))



# Inserting four Presidents and twelve GSU Officers into the MySQL tables


mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Angela", "Schneider", "GSU Officer", "as2019g",
                                                     "AS", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Craig", "Gibson", "GSU Officer", "cg2039g",
                                                     "SB", "M"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Ross", "Hodge", "GSU Officer", "rh5039g",
                                                     "ES", "M"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Sade", "Guy", "GSU Officer", "sg4509g",
                                                     "EH", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Athena", "Clay", "GSU Officer", "ac4938g",
                                                     "AS", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Ethan", "Robert", "GSU Officer", "er3056g",
                                                     "SB", "M"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Jasmine", "Hancock", "GSU Officer", "jh4056g",
                                                     "ES", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Aimee", "Sahara", "GSU Officer", "as4829g",
                                                     "EH", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Sami", "Prosser", "GSU Officer", "sp2078g",
                                                     "AS", "F"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Ryan", "Oneil", "GSU Officer", "ro3945g",
                                                     "SB", "M"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Jon", "Hook", "GSU Officer", "jh2579g",
                                                     "ES", "M"))
mycursor.execute("INSERT INTO Candidate (Forename, Surname, Position, Username, Faculty, Gender)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Audrey", "Cortez", "GSU Officer", "ac4956g",
                                                     "EH", "F"))

db.commit()

mycursor.execute("SELECT * FROM Candidate")
for x in mycursor:
    print(x)
    
   
   
# Code for making objects from the MySQL tables - must import classes first!


students = []

mycursor.execute("SELECT * FROM Student")
for row in mycursor:
    students.append(Student(forename=row[0], surname=row[1], username=row[2], password=row[3],
                            gender=row[4], faculty=row[5]))
                            
                        
    
