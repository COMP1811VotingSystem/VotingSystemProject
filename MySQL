import mysql.connector

# Connecting to database. NOTE code line 8 must be called before database can be entered in the below command
# Add password to below executing!


db = mysql.connector.connect(user='York', password='', host='localhost',database="GSUVotingSystemDatabase")
mycursor = db.cursor(buffered=True)

mycursor.execute("CREATE DATABASE GSUVotingSystemDatabase")


# Creating All Tables

mycursor.execute("CREATE TABLE Student (Forename VARCHAR(50) NOT NULL, Surname VARCHAR(50) NOT NULL,"
                 "Username VARCHAR(7) NOT NULL PRIMARY KEY, Password VARCHAR(50) NOT NULL,"
                 "Gender ENUM('M','F','O') NOT NULL)")
                 
mycursor.execute("CREATE TABLE Candidate (Forename VARCHAR(50) NOT NULL, Surname VARCHAR(50) NOT NULL,
                 "Position VARCHAR(50) NOT NULL, Username VARCHAR(7) NOT NULL PRIMARY KEY,
                 "Faculty ENUM('AS','SB','EH','ES') NOT NULL, Gender ENUM('M','F','O') NOT NULL)")
                 
mycursor.execute("CREATE TABLE Votes (VotesID int PRIMARY KEY NOT NULL AUTO_INCREMENT,Username VARCHAR(7),
                 "FOREIGN KEY(Username) REFERENCES Student(Username), Position VARCHAR(50),
                 "FirstPreference VARCHAR(50), SecondPreference VARCHAR(50), ThirdPreference VARCHAR(50),
                 "FourthPreference VARCHAR(50))")
                 
mycursor.execute("CREATE TABLE Result (Username VARCHAR(7) NOT NULL, FOREIGN KEY(Username) REFERENCES Candidate(Username),
                 "FirstPreference int DEFAULT 0, SecondPreference int DEFAULT 0, ThirdPreference int DEFAULT 0, 
                 "FourthPreference int DEFAULT 0)")
                 


# Other Important Code


# Printing out data from a table

mycursor.execute("SELECT * FROM Student")
for x in mycursor:
    print(x)
    
# Checking each column and their attributes

mycursor.execute("DESCRIBE Student")
for x in mycursor:
    print(x)
    
# Selecting all tables

mycursor.execute("SHOW TABLES")
for x in mycursor:
    print(x)

 
                 
                 
# Example code of adding 5 students to MySQL Database

mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Dante", "Christian", "dc3045g", "ChristDante",
                                                     "M", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Milly", "Rose", "mr2945g", "HelloWorld",
                                                     "F", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Chloe", "Miles", "cm4935g", "99Chloe99",
                                                     "F", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Ronny", "Diaz", "rd2034g", "RDRDPass",
                                                     "M", "EH"))
mycursor.execute("INSERT INTO Student (Forename, Surname, Username, Password, Gender, Faculty)"
                 "VALUES (%s, %s, %s, %s, %s, %s)", ("Tre", "Hawes", "th2034g", "TreHawes1999",
                                                     "M", "EH"))

